%head
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

.wrapper
  = render "layouts/header"

  .index
    .index__container
      .index__container__top
        .index__container__top__title
          購入内容の確認
      .index__container__payment-info
        .index__container__payment-info__item
          .index__container__payment-info__item__all
            = image_tag( "pict/bag.jpg", class: "index__container__payment-info__item__all__img")
            .index__container__payment-info__item__all__right-content
              .index__container__payment-info__item__all__right-content__name
                ★送料込み ビジネスバッグ ブラウン
              .index__container__payment-info__item__all__right-content__price
                ¥4,300 （税込）送料込み
        .index__container__payment-info__price
          .index__container__payment-info__price__all
            .index__container__payment-info__price__all__upper
              .index__container__payment-info__price__all__upper--left
                支払金額
              .index__container__payment-info__price__all__upper--right
                ¥1,300
            .index__container__payment-info__price__all--bottom
              ポイントを使用 (所持ポイント: P0)
        .index__container__payment-info__method
          .index__container__payment-info__method__all
            .index__container__payment-info__method__all--upper
              支払方法
            .index__container__payment-info__method__all--lower
              - if @card.blank?
                = form_with url: "https://checkout.pay.jp" do
                  :plain
                    <script type="text/javascript" src="https://checkout.pay.jp" class="payjp-button" data-key="公開鍵"></script>
              - else
                %br
                = "**** **** **** " + @default_card_information.last4
                %br
                -#- exp_month = @default_card_information.exp_month.to_s
                -#- exp_year = @default_card_information.exp_year.to_s.slice(2,3)
                -#= exp_month + " / " + exp_year
                -#= form_tag(delete_cards_path, method: :post, id: 'charge-form',  name: "inputForm") do
                -#  %input{ type: "hidden", name: "card_id", value: "" }
        .index__container__payment-info__address
          .index__container__payment-info__address__all
            .index__container__payment-info__address__all--upper
              .index__container__payment-info__address__all--upper--left
                配送先
              .index__container__payment-info__address__all--upper--right
                - if @shipping_address.blank?
                  = link_to "+登録してください", shipping_addresses_path
                - else
                  = link_to "変更する", shipping_addresses_path
            .index__container__payment-info__address__all--lower
              -#  = link_to "card", new_card_path
              - if @shipping_address.blank?
              - else
                %br
                  〒
                  = @shipping_address.post_code
                %br
                  = @shipping_address.prefecture
                  = @shipping_address.city
                  = @shipping_address.address1
                %br
                  = @shipping_address.address2
                %br
                  = @shipping_address.user.family_name
                  = @shipping_address.user.first_name


                -# binding.pry
                -#= link_to "変更する", shipping_addresses_path
                
      .index__container__bottom
        = link_to confirm_orders_path do
          - if @condition
            %input{type: "submit", value: "購入する", class: "index__container__bottom__btn--disabled", disabled: "disabled"}
          - else 
            %input{type: "submit", value: "購入する", class: "index__container__bottom__btn"}
